# ChromeTranslate
chrome book translate

## Part one

今天，我们使用网络来做的事情已经不仅仅是网页，而是应用程序

人们观看并上传视频，聊天，玩网页游戏

所有的这些事情在第一个浏览器诞生时，是不存在的

wouldn't it be great,then, to start from scratch

当一切开始时并没有这么神奇，让我们从头开始

让我们看看chrome是如何设计成满足今天的应用程序和用户需要的

---

首先，浏览器需要更稳定。当你写一个重要的电邮或编辑文件，浏览器崩溃是一件大事。

浏览器也需要要快。它们需要要启动得更快，加载页面更快,

——对于网页应用来说，javascript本身可以更快。

they need to be more secure, given what's known about mass browser exploits

考虑到目前已知的大规模浏览器漏洞，它们需要更加安全,需要做一些架构改变以抵御恶意软件

我们要在更多功能和简洁界面之间找到一个最佳平衡点，有一个干净、简单、高效的用户界面

最后，google chrome是一个完全开源的浏览器

我们期望其他人能从我们这里得到启发

就像我们从其他人那里得到启发

---

当我们开始这个项目时，有一些工程师说浏览器的单线程是首先要解决的问题

例如，一旦Javascript开始执行，浏览器就啥事都干不了，只能等着Javascript返回控制权给浏览器

所以开发者只能将API写成异步的

你干完了就call我

ok，没问题

否则一不小心浏览器就进入等待状态....

繁忙中....

---

工程师们设计了一种多线程的浏览器，好吧，让我们看看多线程会带来什么

如果我们有了多线程，那么每个线程都有属于自己的内存和全局数据结构拷贝

进程

chrome 进程管理

我们使用与现代操作系统相同的多线程隔离技术

于是，每个进程渲染不同的TAB页

---

现在你也有了单独的JAVASCRIPT线程

如果一个TAB繁忙,你仍然可以使用其他的TAB页

并且如果一个TAB页上出现bug(我们几乎不可能消灭所有的bug),我们也只丢失了一个TAB页

当一个TAB崩溃时会出现一个“悲伤标签”，但它没有使整个浏览器崩溃。

这个就是“悲伤标签”

一个多进程设计意味着使用一点更多的内存。每个进程都有一个固定的额外内存占用

但随着时间的推移，它也意味着更少的内存膨胀。

在传统的浏览器中，您只有一个进程和一个地址空间，你一直在其中加载网页页面。

当你有太多标签页打开，可以关闭一些释放内存

当你打开一个新Tab页，使用的内存是之前使用过的。

---

但随着时间的推移，一小片一小片的内存碎片出现了(太小有一定概率不能被使用，又占用空间)，虽然曾经使用这些内存碎片的TAB页已经被关闭了

either we have memory that nothing can refer to again, or there's a piece of de-allocated memory we still have pointers to

要么我们的内存没有任何东西可以再次引用，要么就是有一块被取消分配的内存仍然有指向的指针

最后总会发生,当浏览器想要打开一个新标签时，却没有足够大块的内存空间,

于是操作系统只能给浏览器分配更多的地址空间

直到总有一个时刻，浏览器的生命必须结束

快点啊

关几个TAB页

我已经关了，但是没用

但是当google  chrome的TAB页被关闭时，你得到的是整个进程的--

---

--内存，所有的一整块内存都被释放